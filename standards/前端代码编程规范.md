# 🧭 代码编写规范

## 🧱 通用规则

- **缩进**：统一使用 `2 空格` 缩进。  
- **分号**：每行语句结尾必须加分号。  
- **引号**：统一使用单引号 `'`。  
- **行宽**：单行最长不超过 `100` 字符。  
- **结尾换行**：文件末尾保留一个空行。  
- **空格规则**：
  - 运算符两侧必须有空格：`a + b`  
  - 关键字后必须有空格：`if (condition) { ... }`  
  - 对象属性冒号后有空格：`{ key: value }`
- **命名规范**：
  - 变量与函数使用 `camelCase`  
  - 类与构造函数使用 `PascalCase`  
  - 常量使用 `UPPER_CASE_SNAKE`  
  - 私有成员前加下划线 `_`
- **注释规范**：
  - 文件头部注明模块或功能用途  
  - 函数必须有简要说明和参数/返回值注释  
  - 复杂逻辑代码前必须添加行级注释  

---

## 🧩 JavaScript / TypeScript 规范

- **变量声明**：优先使用 `const`，其次 `let`，禁止使用 `var`。  
- **模板字符串**：字符串拼接统一使用模板语法 `` `${}` ``。  
- **函数声明**：
  - 推荐箭头函数：`() => {}`  
  - 对于工具函数，建议加上明确的返回类型声明。  
- **类型声明**：
  - 必须为函数参数和返回值添加类型（TS项目）。  
  - 禁止使用 `any`，可用 `unknown` 或泛型替代。  
- **导入导出**：
  - 按模块类型分组导入（第三方、内部模块、样式）。  
  - 禁止出现循环依赖。  
  - 推荐使用 `export default` 仅在一个文件中出现一次。
- **错误处理**：
  - 异步函数必须用 `try/catch` 包裹。  
  - 日志中禁止打印敏感信息。  
- **Promise / 异步**：
  - 优先使用 `async/await`，避免 `.then()` 链式调用。  
  - 多个异步任务并行可使用 `Promise.all`。

---

## 🎨 样式与格式化规范

- **统一使用 Prettier 格式化**。  
- 禁止在 ESLint 中开启格式相关规则（例如 `indent`、`quotes`、`semi` 等）。  
- 在提交前通过 `lint-staged` 自动执行 `eslint --fix` 与 `prettier --write`。

---

## 🧩 Angular / React 项目建议（可选）

- 组件文件命名统一为 `kebab-case`。  
- 每个组件文件只包含一个主组件。  
- 避免在组件中直接操作 DOM。  
- Props / Input 必须定义类型并附带说明注释。  
- 函数组件应尽量纯净，副作用放入 `useEffect` / `ngOnInit` 等生命周期中。

---

## ✅ 示例（推荐书写风格）

```ts
// ✅ 推荐写法
interface User {
  id: number;
  name: string;
}

const fetchUser = async (id: number): Promise<User> => {
  try {
    const res = await api.get<User>(`/user/${id}`);
    return res.data;
  } catch (error) {
    console.error('获取用户信息失败', error);
    throw error;
  }
};
