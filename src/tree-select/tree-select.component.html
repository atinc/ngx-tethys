<div
  cdkOverlayOrigin
  thySelectControl
  (click)="openSelectPop()"
  #origin="cdkOverlayOrigin"
  [thyPanelOpened]="expandTreeSelectOptions"
  [thySelectedOptions]="selectedValueObject"
  [thyIsMultiple]="thyMultiple"
  [thyAllowClear]="thyAllowClear"
  [thySize]="thySize"
  [thyPlaceholder]="placeholder"
  [customDisplayTemplate]="customDisplayTemplate"
  [thyDisabled]="thyDisable"
  (thyOnClear)="clearSelectedValue($event)"
  (thyOnRemove)="removeMultipleSelectedNode($event)"
>
  <ng-template #customDisplayTemplate let-node>
    <ng-container *ngIf="thyTreeSelectTriggerDisplayRef; else noneTemplate">
      <ng-template
        [ngTemplateOutlet]="thyTreeSelectTriggerDisplayRef"
        [ngTemplateOutletContext]="{ $implicit: node }"
      ></ng-template>
    </ng-container>
    <ng-template #noneTemplate>
      {{ node[thyShowKey] }}
    </ng-template>
  </ng-template>
</div>

<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayHasBackdrop]="false"
  [cdkConnectedOverlayPositions]="positions"
  [cdkConnectedOverlayOrigin]="origin"
  [cdkConnectedOverlayWidth]="cdkConnectOverlayWidth"
  [cdkConnectedOverlayOpen]="expandTreeSelectOptions"
  (detach)="close()"
>
  <thy-tree-select-nodes></thy-tree-select-nodes>
</ng-template>
