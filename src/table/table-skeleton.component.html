<table
  [ngClass]="{
    'table-bordered': thyTheme === 'bordered',
    'table-boxed': thyTheme === 'boxed'
  }">
  <ng-container *ngIf="thyShowSkeletonHeader">
    <thead>
      <tr>
        <th [width]="column.width" *ngFor="let column of skeletonColumnConfigs">
          <thy-skeleton-rectangle
            [thyRowWidth]="titleWidth"
            [thyRowHeight]="titleHeight"
            [thyBorderRadius]="thyBorderRadius"
            [thyAnimated]="thyAnimated"
            [thyAnimatedInterval]="thyAnimatedInterval"
            [thyPrimaryColor]="thyTheme === 'bordered' || thyTheme === 'boxed' ? '#eee' : thyPrimaryColor"
            [thySecondaryColor]="thySecondaryColor"></thy-skeleton-rectangle>
        </th>
      </tr>
    </thead>
  </ng-container>
  <tbody>
    <ng-container *ngFor="let item of rowCount; let i = index">
      <tr>
        <ng-container *ngFor="let column of skeletonColumnConfigs">
          <td [style.width]="column.width">
            <ng-container
              *thyViewOutlet="
                column.type === columnSkeletonType.title
                  ? titleTemplate
                  : column.type === columnSkeletonType.member
                  ? memberTemplate
                  : defaultTemplate;
                  context:{
                    trIndex: i,
                  }
              "></ng-container>
          </td>
        </ng-container>
      </tr>
    </ng-container>
  </tbody>
</table>

<ng-template #titleTemplate let-trIndex="trIndex">
  <div class="d-flex align-items-center">
    <thy-skeleton-rectangle
      class="mr-2 flex-shrink-0"
      [thyRowWidth]="checkBoxWidth"
      [thyRowHeight]="thyRowHeight"
      [thyBorderRadius]="thyBorderRadius"
      [thyAnimated]="thyAnimated"
      [thyAnimatedInterval]="thyAnimatedInterval"
      [thyPrimaryColor]="thyPrimaryColor"
      [thySecondaryColor]="thySecondaryColor"></thy-skeleton-rectangle>

    <ng-container
      *thyViewOutlet="defaultTemplate;
      context:{
        rowWidth: trIndex % 3 === 0 ? '75%' : trIndex % 3 === 1 ? '90%' : trIndex % 3 === 2 ? '65%' : '',
      }"></ng-container>
  </div>
</ng-template>

<ng-template #memberTemplate>
  <div class="d-flex align-items-center">
    <thy-skeleton-circle
      class="mr-2 flex-shrink-0"
      [thySize]="avatarSize"
      [thyAnimated]="thyAnimated"
      [thyAnimatedInterval]="thyAnimatedInterval"
      [thyPrimaryColor]="thyPrimaryColor"
      [thySecondaryColor]="thySecondaryColor"></thy-skeleton-circle>

    <ng-container *thyViewOutlet="defaultTemplate"></ng-container>
  </div>
</ng-template>

<ng-template #defaultTemplate let-rowWidth="rowWidth">
  <thy-skeleton-rectangle
    [thyRowWidth]="rowWidth"
    [thyRowHeight]="thyRowHeight"
    [thyBorderRadius]="thyBorderRadius"
    [thyAnimated]="thyAnimated"
    [thyAnimatedInterval]="thyAnimatedInterval"
    [thyPrimaryColor]="thyPrimaryColor"
    [thySecondaryColor]="thySecondaryColor"></thy-skeleton-rectangle>
</ng-template>
